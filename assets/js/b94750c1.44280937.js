"use strict";(self.webpackChunkir_docs=self.webpackChunkir_docs||[]).push([[6299],{4537:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"ignite-cli/contributing/Releasing-Ignite","title":"Releasing Ignite","description":"Ignite is released via CI and semantic release. When you merge a PR into master, you\'ll have the opportunity to edit the squash commit message, which determines what version level will be bumped as well as the automatically generated changelog that will be generated.","source":"@site/docs/ignite-cli/contributing/Releasing-Ignite.md","sourceDirName":"ignite-cli/contributing","slug":"/ignite-cli/contributing/Releasing-Ignite","permalink":"/ignite-cli/contributing/Releasing-Ignite","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":155,"frontMatter":{"sidebar_position":155},"sidebar":"Ignite","previous":{"title":"A Tour of the Ignite CLI Code Base","permalink":"/ignite-cli/contributing/Tour-of-Ignite"},"next":{"title":"Expo and Ignite","permalink":"/ignite-cli/expo/Expo-and-Ignite"}}');var s=i(4848),a=i(8453);const l={sidebar_position:155},r="Releasing Ignite",o={},c=[{value:"A note about semver",id:"a-note-about-semver",level:2},{value:"bugfixes",id:"bugfixes",level:3},{value:"features",id:"features",level:3},{value:"breaking changes",id:"breaking-changes",level:3},{value:"Manual Beta Releases",id:"manual-beta-releases",level:2},{value:"1. Ensure you have access to the npm package",id:"1-ensure-you-have-access-to-the-npm-package",level:3},{value:"2. Build the CLI",id:"2-build-the-cli",level:3},{value:"3. Update the version manually",id:"3-update-the-version-manually",level:3},{value:"4. Release!",id:"4-release",level:3},{value:"5. Test",id:"5-test",level:3},{value:"Rolling back a release",id:"rolling-back-a-release",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"releasing-ignite",children:"Releasing Ignite"})}),"\n",(0,s.jsxs)(n.p,{children:["Ignite is released via CI and ",(0,s.jsx)(n.a,{href:"https://semantic-release.gitbook.io/semantic-release/",children:"semantic release"}),". When you merge a PR into ",(0,s.jsx)(n.code,{children:"master"}),", you'll have the opportunity to edit the squash commit message, which determines what version level will be bumped as well as the automatically generated changelog that will be generated."]}),"\n",(0,s.jsx)(n.p,{children:"We like to include the PR author's name in the commit, as well, which will tag them in the release."}),"\n",(0,s.jsx)(n.h2,{id:"a-note-about-semver",children:"A note about semver"}),"\n",(0,s.jsxs)(n.p,{children:["Ignite, being a CLI/boilerplate and not a dependency, doesn't ",(0,s.jsx)(n.em,{children:"strictly"})," follow semver (there isn't really a public API being used, other than the CLI itself). We tend to use fixes and features as you'd expect, but major bumps tend to be more major features, stack updates, etc."]}),"\n",(0,s.jsx)(n.p,{children:"Since you're unlikely to be directly depending on Ignite in your app, this shouldn't affect you."}),"\n",(0,s.jsx)(n.h3,{id:"bugfixes",children:"bugfixes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"fix(cli): Check for undefined in packager - fixes #1234 (#1300 by @jamonholmgren)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This bumps the last number, aka the 3 in ",(0,s.jsx)(n.code,{children:"1.2.3"})," would be come 4 (",(0,s.jsx)(n.code,{children:"1.2.4"}),'). We call this a "patch-level" release.']}),"\n",(0,s.jsxs)(n.p,{children:["The important part is the ",(0,s.jsx)(n.code,{children:"fix:"})," ... the parenthesis are optional, and simply provide a bolded category for the release notes. Go look at recent releases to see how this is displayed."]}),"\n",(0,s.jsx)(n.h3,{id:"features",children:"features"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"feat(tests): Added react-native-testing-library (#1300 by @joshuayoes)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will bump the middle number, aka the 2.3 in ",(0,s.jsx)(n.code,{children:"1.2.3"})," would become 3.0 (",(0,s.jsx)(n.code,{children:"1.3.0"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["The important part is the ",(0,s.jsx)(n.code,{children:"feat:"})," .. the parenthesis are optional, as above."]}),"\n",(0,s.jsx)(n.h3,{id:"breaking-changes",children:"breaking changes"}),"\n",(0,s.jsxs)(n.p,{children:["For breaking changes (bumping the first number, aka ",(0,s.jsx)(n.code,{children:"2.0.0"}),"), you need to include ",(0,s.jsx)(n.code,{children:"BREAKING CHANGE:"})," in your commit message. Generally, the title of the commit will be something like ",(0,s.jsx)(n.code,{children:"fix:"})," or ",(0,s.jsx)(n.code,{children:"feat:"})," or ",(0,s.jsx)(n.code,{children:"deps:"})," with ",(0,s.jsx)(n.code,{children:"BREAKING CHANGE:"})," in the body."]}),"\n",(0,s.jsx)(n.p,{children:"Example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'feat(cli): Changes init to new in CLI (#1234 by @GantMan)\n\nBREAKING CHANGE: To spin up a new app, you\'ll use "ignite new" instead of "ignite init".\n'})}),"\n",(0,s.jsx)(n.h2,{id:"manual-beta-releases",children:"Manual Beta Releases"}),"\n",(0,s.jsx)(n.p,{children:"For beta releases, the process is manual. Here are the steps:"}),"\n",(0,s.jsx)(n.h3,{id:"1-ensure-you-have-access-to-the-npm-package",children:"1. Ensure you have access to the npm package"}),"\n",(0,s.jsx)(n.p,{children:"Run this to find your username:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm whoami\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In my case, it's ",(0,s.jsx)(n.code,{children:"jamonholmgren"}),". Then run this to see if you have access:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm author list ignite-cli\n"})}),"\n",(0,s.jsx)(n.p,{children:"If your name is not included, you'll need to be added to the Infinite Red team:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/settings/infinitered/members",children:"https://www.npmjs.com/settings/infinitered/members"})}),"\n",(0,s.jsx)(n.p,{children:"Then run the author list command again to ensure you are listed."}),"\n",(0,s.jsx)(n.h3,{id:"2-build-the-cli",children:"2. Build the CLI"}),"\n",(0,s.jsx)(n.p,{children:"Run these commands from the Ignite root to clean & build the CLI:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn clean\nyarn build\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-update-the-version-manually",children:"3. Update the version manually"}),"\n",(0,s.jsxs)(n.p,{children:["Update the version to what you want in the root ",(0,s.jsx)(n.code,{children:"package.json"}),". Note that you will NOT be checking this into git. Just set it before we release and then reset back to where it was afterward."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "ignite-cli",\n  "version": "9.5.0-beta.1",\n  "description": "Infinite Red\'s hottest boilerplate for React Native.",\n  "bin": {\n    "ignite": "bin/ignite",\n    "ignite-cli": "bin/ignite"\n  }\n  // ...\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"4-release",children:"4. Release!"}),"\n",(0,s.jsxs)(n.p,{children:["You'll want to use ",(0,s.jsx)(n.code,{children:"npm"})," for this, not ",(0,s.jsx)(n.code,{children:"yarn"}),". I don't remember why."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm publish --tag=next\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will publish a new version and set the @next tag to it. Note that ",(0,s.jsx)(n.code,{children:"--tag=latest"})," is the same as not providing a tag and will publish as the main package version."]}),"\n",(0,s.jsxs)(n.p,{children:["Check that the size of the newly published package is on the order of 3MB or less. If it's much more than that, you forgot to run ",(0,s.jsx)(n.code,{children:"yarn clean"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"5-test",children:"5. Test"}),"\n",(0,s.jsxs)(n.p,{children:["If you do it as listed above, you'll be able to test the new beta version using something like ",(0,s.jsx)(n.code,{children:"npx ignite-cli@next ..."}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"rolling-back-a-release",children:"Rolling back a release"}),"\n",(0,s.jsx)(n.p,{children:"You can quickly roll back an erroneous release with:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm unpublish ignite-cli@1.2.3\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You have to do this ",(0,s.jsx)(n.a,{href:"https://docs.npmjs.com/policies/unpublish",children:"fairly quickly"}),", as it won't work after a while."]}),"\n",(0,s.jsx)(n.p,{children:'Note that that version number is "burned", even if unpublished -- you\'ll have to increment the version and try again.'})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var t=i(6540);const s={},a=t.createContext(s);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);